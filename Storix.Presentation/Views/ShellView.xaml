<views:MvxWpfView x:Class="Storix.Presentation.Views.ShellView"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:local="clr-namespace:Storix.Presentation.Views"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  xmlns:modalDialogControl="clr-namespace:ModalDialogControl;assembly=ModalDialogControl"
                  xmlns:resources="clr-namespace:Storix.Presentation.Resources"
                  xmlns:viewModels="clr-namespace:Storix.Core.ViewModels;assembly=Storix.Core"
                  xmlns:views="clr-namespace:MvvmCross.Platforms.Wpf.Views;assembly=MvvmCross.Platforms.Wpf"
                  x:Name="Home"
                  d:DataContext="{d:DesignInstance Type=viewModels:ShellViewModel}"
                  d:DesignHeight="750"
                  d:DesignWidth="1200"
                  Loaded="ShellView_OnLoaded"
                  mc:Ignorable="d">
    <views:MvxWpfView.Resources>
        <DataTemplate DataType="{x:Type viewModels:AnalyticsPaneViewModel}">
            <local:AnalyticsPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:ProductPaneViewModel}">
            <local:ProductPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:CategoryPaneViewModel}">
            <local:CategoryPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:SalesOrderPaneViewModel}">
            <local:SalesOrderPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:PurchaseOrderPaneViewModel}">
            <local:PurchaseOrderPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:SupplierPaneViewModel}">
            <local:SupplierPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:CustomerPaneViewModel}">
            <local:CustomerPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:LocationPaneViewModel}">
            <local:LocationPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:ReportPaneViewModel}">
            <local:ReportsPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:SettingsPaneViewModel}">
            <local:SettingsPane />
        </DataTemplate>

    </views:MvxWpfView.Resources>

    <Border UseLayoutRounding="True">
        <Grid>
            <Grid.OpacityMask>
                <VisualBrush Visual="{Binding ElementName=Border}" />
            </Grid.OpacityMask>

            <modalDialogControl:ModalDialog Panel.ZIndex="1"
                                            IsOpen="{Binding IsModalOpen, UpdateSourceTrigger=PropertyChanged}"
                                            TheBackground="{DynamicResource TertiaryBackgroundColor}"
                                            TheShadow="{DynamicResource SecondaryWhiteColor}">
                <ContentControl Margin="30,15" Content="{Binding CurrentModalContent}" />
            </modalDialogControl:ModalDialog>

            <Border x:Name="Border"
                    Background="{DynamicResource PrimaryBackgroundColor}"
                    CornerRadius="10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition x:Name="NavColumn" Width="250" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Start Navigation-Pane  -->
                    <Border Grid.Column="0"
                            Padding="10"
                            Background="{DynamicResource SecondaryBackgroundColor}"
                            CornerRadius="10 0 0 10">

                        <Grid x:Name="GridMenu">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="60" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="80" />
                            </Grid.RowDefinitions>

                            <!--  Logo + Toggle Button  -->
                            <DockPanel Grid.Row="0"
                                       VerticalAlignment="Center"
                                       LastChildFill="False">
                                <Button x:Name="ToggleNavButton"
                                        Width="36"
                                        Height="36"
                                        Margin="0,0,5,0"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Click="ToggleNavButton_Click"
                                        Content="☰"
                                        Cursor="Hand"
                                        FontSize="20"
                                        Foreground="{DynamicResource SecondaryBlueColor}" />

                                <StackPanel x:Name="LogoPanel"
                                            DockPanel.Dock="Right"
                                            Orientation="Horizontal">
                                    <Image Width="36"
                                           Height="36"
                                           Margin="10,0,0,0"
                                           VerticalAlignment="Center"
                                           Source="/Assets/Icons/logo.png"
                                           Stretch="Fill" />

                                    <Label Margin="5,0,0,0"
                                           VerticalAlignment="Center"
                                           Content="Storix"
                                           FontSize="24"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource SecondaryBlueColor}" />
                                </StackPanel>
                            </DockPanel>

                            <!--  Start Navigation Buttons  -->
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                                <StackPanel x:Name="NavButtonsPanel">
                                    <!--  Dashboard  -->
                                    <RadioButton Margin="0,30,0,0"
                                                 Command="{Binding NavigateToAnalyticCommand}"
                                                 Content="Dashboard"
                                                 IsChecked="True"
                                                 Style="{DynamicResource MenuRadioButtonStyle}"
                                                 Tag="{DynamicResource Dashboard}" />

                                    <!--  Inventory (Expandable)  -->
                                    <StackPanel Margin="0,1,0,0">
                                        <ToggleButton x:Name="InventoryExpander"
                                                      Style="{DynamicResource MenuToggleButtonStyle}"
                                                      Tag="{DynamicResource Inventory}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <Path Grid.Column="0"
                                                      Width="18"
                                                      Height="18"
                                                      Margin="10,0,15,0"
                                                      Data="{DynamicResource Inventory}"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      Stretch="Uniform" />

                                                <TextBlock Grid.Column="1"
                                                           VerticalAlignment="Center"
                                                           Text="Inventory" />

                                                <Path Grid.Column="2"
                                                      Width="10"
                                                      Height="10"
                                                      Margin="0,0,10,0"
                                                      Data="M7 10L12 15L17 10H7Z"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      RenderTransformOrigin="0.5,0.5"
                                                      Stretch="Uniform">
                                                    <Path.RenderTransform>
                                                        <RotateTransform x:Name="InventoryArrow" Angle="0" />
                                                    </Path.RenderTransform>
                                                </Path>
                                            </Grid>
                                        </ToggleButton>

                                        <!--  Inventory Sub-items  -->
                                        <StackPanel x:Name="InventorySubItems"
                                                    Margin="20,0,0,0"
                                                    Visibility="Collapsed">
                                            <RadioButton Margin="0,5,0,0"
                                                         Command="{Binding NavigateToProductsCommand}"
                                                         Content="Products"
                                                         Style="{DynamicResource SubMenuRadioButtonStyle}"
                                                         Tag="{DynamicResource Products}" />

                                            <RadioButton Margin="0,5,0,5"
                                                         Command="{Binding NavigateToCategoriesCommand}"
                                                         Content="Categories"
                                                         Style="{DynamicResource SubMenuRadioButtonStyle}"
                                                         Tag="{DynamicResource Categories}" />
                                        </StackPanel>
                                    </StackPanel>

                                    <!--  Orders (Expandable)  -->
                                    <StackPanel Margin="0,1,0,0">
                                        <ToggleButton x:Name="OrdersExpander"
                                                      Style="{DynamicResource MenuToggleButtonStyle}"
                                                      Tag="{DynamicResource Orders}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <Path Grid.Column="0"
                                                      Width="18"
                                                      Height="18"
                                                      Margin="10,0,15,0"
                                                      Data="{DynamicResource Orders}"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      Stretch="Uniform" />

                                                <TextBlock Grid.Column="1"
                                                           VerticalAlignment="Center"
                                                           Text="Orders" />

                                                <Path Grid.Column="2"
                                                      Width="10"
                                                      Height="10"
                                                      Margin="0,0,10,0"
                                                      Data="M7 10L12 15L17 10H7Z"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      RenderTransformOrigin="0.5,0.5"
                                                      Stretch="Uniform">
                                                    <Path.RenderTransform>
                                                        <RotateTransform x:Name="OrdersArrow" Angle="0" />
                                                    </Path.RenderTransform>
                                                </Path>
                                            </Grid>
                                        </ToggleButton>

                                        <!--  Orders Sub-items  -->
                                        <StackPanel x:Name="OrdersSubItems"
                                                    Margin="20,0,0,0"
                                                    Visibility="Collapsed">
                                            <RadioButton Margin="0,5,0,0"
                                                         Command="{Binding NavigateToSalesOrdersCommand}"
                                                         Content="Sales Orders"
                                                         Style="{DynamicResource SubMenuRadioButtonStyle}"
                                                         Tag="{DynamicResource SalesOrders}" />

                                            <RadioButton Margin="0,5,0,5"
                                                         Command="{Binding NavigateToPurchaseOrdersCommand}"
                                                         Content="Purchase Orders"
                                                         Style="{DynamicResource SubMenuRadioButtonStyle}"
                                                         Tag="{DynamicResource PurchaseOrders}" />
                                        </StackPanel>
                                    </StackPanel>

                                    <!--  Suppliers  -->
                                    <RadioButton Margin="0,1,0,1"
                                                 Command="{Binding NavigateToSuppliersCommand}"
                                                 Content="Suppliers"
                                                 Style="{DynamicResource MenuRadioButtonStyle}"
                                                 Tag="{DynamicResource Suppliers}" />

                                    <!--  Customers  -->
                                    <RadioButton Margin="0,1,0,1"
                                                 Command="{Binding NavigateToCustomersCommand}"
                                                 Content="Customers"
                                                 Style="{DynamicResource MenuRadioButtonStyle}"
                                                 Tag="{DynamicResource Customers}" />

                                    <!--  Locations  -->
                                    <RadioButton Margin="0,1,0,1"
                                                 Command="{Binding NavigateToLocationsCommand}"
                                                 Content="Locations"
                                                 Style="{DynamicResource MenuRadioButtonStyle}"
                                                 Tag="{DynamicResource Locations}" />

                                    <!--  Reports  -->
                                    <RadioButton Margin="0,1,0,1"
                                                 Command="{Binding NavigateToReportsCommand}"
                                                 Content="Reports"
                                                 Style="{DynamicResource MenuRadioButtonStyle}"
                                                 Tag="{DynamicResource Reports}" />

                                    <Separator Margin="20,20" Background="{DynamicResource TertiaryBackgroundColor}" />

                                    <!--  Settings  -->
                                    <RadioButton Margin="0,1,0,1"
                                                 Command="{Binding NavigateToSettingsCommand}"
                                                 Content="Settings"
                                                 Style="{DynamicResource MenuRadioButtonStyle}"
                                                 Tag="{DynamicResource Settings}" />
                                </StackPanel>
                            </ScrollViewer>
                            <!--  End Navigation Buttons  -->

                            <!--  Start Theme Switcher  -->
                            <Border Grid.Row="2"
                                    Width="110"
                                    Height="35"
                                    Margin="0,0,20,0"
                                    HorizontalAlignment="Right"
                                    Background="{DynamicResource TertiaryBackgroundColor}"
                                    CornerRadius="18">
                                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                    <Path Width="16"
                                          Height="16"
                                          VerticalAlignment="Center"
                                          Data="{DynamicResource Sun}"
                                          Fill="{DynamicResource PrimaryYellowColor}"
                                          Stretch="UniformToFill" />
                                    <ToggleButton x:Name="Themes"
                                                  Margin="10,0,10,0"
                                                  HorizontalAlignment="Right"
                                                  Click="Themes_Click"
                                                  IsChecked="False"
                                                  Style="{DynamicResource ToggleButtonStyle}" />
                                    <Path Width="16"
                                          Height="16"
                                          VerticalAlignment="Center"
                                          Data="{DynamicResource Moon}"
                                          Fill="{DynamicResource PrimaryWhiteColor}"
                                          Stretch="Fill" />
                                </StackPanel>
                            </Border>
                            <!--  End Theme Switcher  -->
                        </Grid>
                    </Border>
                    <!--  End Navigation-Pane  -->

                    <!--  Start Main-Content  -->
                    <Grid Grid.Column="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="60" />
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="auto" />
                            </Grid.ColumnDefinitions>

                            <!--  Search for Product and Categories  -->
                            <resources:CustomSearchBox Grid.Column="0" Placeholder="Search for Product and Categories" />

                            <!--  Window Buttons  -->
                            <StackPanel Grid.Column="1"
                                        Height="30"
                                        Margin="0,5,10,0"
                                        VerticalAlignment="Top"
                                        FlowDirection="RightToLeft"
                                        Orientation="Horizontal">
                                <Button x:Name="CloseButton"
                                        Click="CloseButton_OnClick"
                                        Content="{DynamicResource Close}"
                                        Style="{StaticResource IconButtonsStyle}" />
                                <Button x:Name="RestoreButton"
                                        Margin="5,0"
                                        Click="RestoreButton_OnClick"
                                        Content="{DynamicResource Maximize}"
                                        Style="{StaticResource IconButtonsStyle}" />
                                <Button x:Name="MinimizeButton"
                                        Click="MinimizeButton_OnClick"
                                        Content="{DynamicResource Minimize}"
                                        Style="{StaticResource IconButtonsStyle}" />
                            </StackPanel>

                        </Grid>

                        <ContentControl Grid.Row="1"
                                        Margin="10"
                                        Content="{Binding CurrentMainContent}" />
                    </Grid>
                    <!--  End Main-Content  -->
                </Grid>
            </Border>
        </Grid>
    </Border>
</views:MvxWpfView>

<!--  Let the Navigation Items show their labels as tooltips on hover when the NavBar is collapsed  -->