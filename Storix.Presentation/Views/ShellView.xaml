<views:MvxWpfView x:Class="Storix.Presentation.Views.ShellView"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:categories="clr-namespace:Storix.Core.ViewModels.Categories;assembly=Storix.Core"
                  xmlns:components="clr-namespace:Storix.Presentation.Components"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:deletion="clr-namespace:Storix.Presentation.Deletion"
                  xmlns:forms="clr-namespace:Storix.Presentation.Forms"
                  xmlns:local="clr-namespace:Storix.Presentation.Views"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  xmlns:modalDialogControl="clr-namespace:ModalDialogControl;assembly=ModalDialogControl"
                  xmlns:products="clr-namespace:Storix.Core.ViewModels.Products;assembly=Storix.Core"
                  xmlns:resources="clr-namespace:Storix.Presentation.Resources"
                  xmlns:viewModels="clr-namespace:Storix.Core.ViewModels;assembly=Storix.Core"
                  xmlns:views="clr-namespace:MvvmCross.Platforms.Wpf.Views;assembly=MvvmCross.Platforms.Wpf"
                  x:Name="Home"
                  d:DataContext="{d:DesignInstance Type=viewModels:ShellViewModel}"
                  d:DesignHeight="750"
                  d:DesignWidth="1200"
                  Loaded="ShellView_OnLoaded"
                  mc:Ignorable="d">
    <views:MvxWpfView.Resources>
        <DataTemplate DataType="{x:Type viewModels:AnalyticsPaneViewModel}">
            <local:AnalyticsPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:ProductPaneViewModel}">
            <local:ProductPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:CategoryPaneViewModel}">
            <local:CategoryPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:SalesOrderPaneViewModel}">
            <local:SalesOrderPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:PurchaseOrderPaneViewModel}">
            <local:PurchaseOrderPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:SupplierPaneViewModel}">
            <local:SupplierPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:CustomerPaneViewModel}">
            <local:CustomerPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:LocationPaneViewModel}">
            <local:LocationPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:ReportsPaneViewModel}">
            <local:ReportsPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type viewModels:SettingsPaneViewModel}">
            <local:SettingsPane />
        </DataTemplate>

        <DataTemplate DataType="{x:Type products:ProductListViewModel}">
            <components:ProductList />
        </DataTemplate>

        <DataTemplate DataType="{x:Type categories:CategoryListViewModel}">
            <components:CategoryList />
        </DataTemplate>

        <DataTemplate DataType="{x:Type products:ProductFormViewModel}">
            <forms:ProductForm />
        </DataTemplate>

        <DataTemplate DataType="{x:Type categories:CategoryFormViewModel}">
            <forms:CategoryForm />
        </DataTemplate>

        <DataTemplate DataType="{x:Type products:ProductDeleteViewModel}">
            <deletion:ProductDeleteConfirmation />
        </DataTemplate>

        <DataTemplate DataType="{x:Type categories:CategoryDeleteViewModel}">
            <deletion:CategoryDeleteConfirmation />
        </DataTemplate>

    </views:MvxWpfView.Resources>

    <Border UseLayoutRounding="True">
        <Grid>
            <Grid.OpacityMask>
                <VisualBrush Visual="{Binding ElementName=Border}" />
            </Grid.OpacityMask>

            <modalDialogControl:ModalDialog Panel.ZIndex="1"
                                            IsOpen="{Binding IsModalOpen, UpdateSourceTrigger=PropertyChanged}"
                                            TheBackground="{DynamicResource TertiaryBackgroundColor}"
                                            TheShadow="{DynamicResource SecondaryWhiteColor}">
                <ContentControl Margin="30,15" Content="{Binding CurrentModalContent}" />
            </modalDialogControl:ModalDialog>

            <Border x:Name="Border"
                    Background="{DynamicResource PrimaryBackgroundColor}"
                    CornerRadius="10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition x:Name="NavColumn" Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Start Navigation-Pane  -->
                    <Border Grid.Column="0"
                            Padding="10"
                            Background="{DynamicResource SecondaryBackgroundColor}"
                            CornerRadius="10 0 0 10">

                        <Grid x:Name="GridNav" Width="250">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="60" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="80" />
                            </Grid.RowDefinitions>

                            <!--  Logo Area  -->
                            <Grid Grid.Row="0"
                                  VerticalAlignment="Center"
                                  Background="Transparent"
                                  MouseDown="LogoArea_OnMouseDown">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Width="32"
                                        Height="32"
                                        Margin="14,0,10,0"
                                        HorizontalAlignment="Left">
                                    <Border.Background>
                                        <ImageBrush ImageSource="/Assets/Icons/Storix-logo.png" Stretch="Uniform" />
                                    </Border.Background>
                                </Border>

                                <Label Grid.Column="1"
                                       HorizontalAlignment="Left"
                                       VerticalAlignment="Center"
                                       Content="Storix"
                                       FontSize="24"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource SecondaryBlueColor}" />
                            </Grid>

                            <!--  Start Navigation Buttons  -->
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                                <StackPanel x:Name="NavButtonsPanel">
                                    <!--  Dashboard  -->
                                    <Button x:Name="BtnDashboard"
                                            Margin="0,10,0,2"
                                            MouseEnter="BtnDashboard_MouseEnter"
                                            MouseLeave="BtnDashboard_MouseLeave"
                                            Style="{DynamicResource PopupButtonStyle}">
                                        <resources:NavigationItem Padding="0,8"
                                                                  CommandName="{Binding NavigateToAnalyticCommand}"
                                                                  GroupName="MenuItem"
                                                                  Icon="{DynamicResource Dashboard}"
                                                                  IconWidth="18"
                                                                  IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                  IsSelected="True"
                                                                  Text="Dashboard" />
                                    </Button>

                                    <!--  Inventory (Expandable)  -->
                                    <StackPanel Margin="0,2,0,2">
                                        <ToggleButton x:Name="InventoryExpander"
                                                      MouseEnter="BtnInventory_MouseEnter"
                                                      MouseLeave="BtnInventory_MouseLeave"
                                                      Style="{DynamicResource MenuToggleButtonStyle}"
                                                      Tag="{DynamicResource Inventory}">
                                            <Grid Height="40">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="60" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <Path Grid.Column="0"
                                                      Width="18"
                                                      Height="18"
                                                      Margin="21,0,0,0"
                                                      Data="{DynamicResource Inventory}"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      Stretch="Uniform" />

                                                <TextBlock Grid.Column="1"
                                                           Margin="18,0,0,0"
                                                           VerticalAlignment="Center"
                                                           FontSize="13"
                                                           Text="Inventory" />

                                                <Path Grid.Column="2"
                                                      Width="8"
                                                      Height="8"
                                                      Margin="0,0,15,0"
                                                      Data="M7 10L12 15L17 10H7Z"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      RenderTransformOrigin="0.5,0.5"
                                                      Stretch="Uniform">
                                                    <Path.RenderTransform>
                                                        <RotateTransform x:Name="InventoryArrow" Angle="0" />
                                                    </Path.RenderTransform>
                                                </Path>
                                            </Grid>
                                        </ToggleButton>

                                        <!--  Inventory Sub-items  -->
                                        <StackPanel x:Name="InventorySubItems"
                                                    Margin="0,2,0,2"
                                                    Visibility="Collapsed">
                                            <Button x:Name="BtnProducts"
                                                    Margin="0,0,0,2"
                                                    MouseEnter="BtnProducts_MouseEnter"
                                                    MouseLeave="BtnProducts_MouseLeave"
                                                    Style="{DynamicResource PopupButtonStyle}">
                                                <resources:NavigationItem Padding="0,6"
                                                                          CommandName="{Binding NavigateToProductsCommand}"
                                                                          GroupName="MenuItem"
                                                                          Icon="{DynamicResource Products}"
                                                                          IconMargin="23,0,0,0"
                                                                          IconWidth="14"
                                                                          IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                          IsSubMenuItem="True"
                                                                          Text="Products" />
                                            </Button>

                                            <Button x:Name="BtnCategories"
                                                    Margin="0,0,0,2"
                                                    MouseEnter="BtnCategories_MouseEnter"
                                                    MouseLeave="BtnCategories_MouseLeave"
                                                    Style="{DynamicResource PopupButtonStyle}">
                                                <resources:NavigationItem Padding="0,6"
                                                                          CommandName="{Binding NavigateToCategoriesCommand}"
                                                                          GroupName="MenuItem"
                                                                          Icon="{DynamicResource Categories}"
                                                                          IconMargin="23,0,0,0"
                                                                          IconWidth="14"
                                                                          IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                          IsSubMenuItem="True"
                                                                          Text="Categories" />
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <!--  Orders (Expandable)  -->
                                    <StackPanel Margin="0,2,0,2">
                                        <ToggleButton x:Name="OrdersExpander"
                                                      MouseEnter="BtnOrders_MouseEnter"
                                                      MouseLeave="BtnOrders_MouseLeave"
                                                      Style="{DynamicResource MenuToggleButtonStyle}"
                                                      Tag="{DynamicResource Orders}">
                                            <Grid Height="40">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="60" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <Path Grid.Column="0"
                                                      Width="18"
                                                      Height="18"
                                                      Margin="21,0,0,0"
                                                      Data="{DynamicResource Orders}"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      Stretch="Uniform" />

                                                <TextBlock Grid.Column="1"
                                                           Margin="18,0,0,0"
                                                           VerticalAlignment="Center"
                                                           FontSize="13"
                                                           Text="Orders" />

                                                <Path Grid.Column="2"
                                                      Width="8"
                                                      Height="8"
                                                      Margin="0,0,15,0"
                                                      Data="M7 10L12 15L17 10H7Z"
                                                      Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"
                                                      RenderTransformOrigin="0.5,0.5"
                                                      Stretch="Uniform">
                                                    <Path.RenderTransform>
                                                        <RotateTransform x:Name="OrdersArrow" Angle="0" />
                                                    </Path.RenderTransform>
                                                </Path>
                                            </Grid>
                                        </ToggleButton>

                                        <!--  Orders Sub-items  -->
                                        <StackPanel x:Name="OrdersSubItems"
                                                    Margin="0,2,0,2"
                                                    Visibility="Collapsed">
                                            <Button x:Name="BtnSalesOrders"
                                                    Margin="0,0,0,2"
                                                    MouseEnter="BtnSalesOrders_MouseEnter"
                                                    MouseLeave="BtnSalesOrders_MouseLeave"
                                                    Style="{DynamicResource PopupButtonStyle}">
                                                <resources:NavigationItem Padding="20,6"
                                                                          CommandName="{Binding NavigateToSalesOrdersCommand}"
                                                                          GroupName="MenuItem"
                                                                          Icon="{DynamicResource SalesOrders}"
                                                                          IconMargin="0,0,0,0"
                                                                          IconWidth="14"
                                                                          IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                          Text="Sales Orders" />
                                            </Button>

                                            <Button x:Name="BtnPurchaseOrders"
                                                    Margin="0,0,0,2"
                                                    MouseEnter="BtnPurchaseOrders_MouseEnter"
                                                    MouseLeave="BtnPurchaseOrders_MouseLeave"
                                                    Style="{DynamicResource PopupButtonStyle}">
                                                <resources:NavigationItem Padding="20,6"
                                                                          CommandName="{Binding NavigateToPurchaseOrdersCommand}"
                                                                          GroupName="MenuItem"
                                                                          Icon="{DynamicResource PurchaseOrders}"
                                                                          IconMargin="0,0,0,0"
                                                                          IconWidth="14"
                                                                          IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                          Text="Purchase Orders" />
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <!--  Suppliers  -->
                                    <Button x:Name="BtnSuppliers"
                                            Margin="0,2,0,2"
                                            MouseEnter="BtnSuppliers_MouseEnter"
                                            MouseLeave="BtnSuppliers_MouseLeave"
                                            Style="{DynamicResource PopupButtonStyle}">
                                        <resources:NavigationItem Padding="0,8"
                                                                  CommandName="{Binding NavigateToSuppliersCommand}"
                                                                  GroupName="MenuItem"
                                                                  Icon="{DynamicResource Suppliers}"
                                                                  IconWidth="18"
                                                                  IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                  Text="Suppliers" />
                                    </Button>

                                    <!--  Customers  -->
                                    <Button x:Name="BtnCustomers"
                                            Margin="0,2,0,2"
                                            MouseEnter="BtnCustomers_MouseEnter"
                                            MouseLeave="BtnCustomers_MouseLeave"
                                            Style="{DynamicResource PopupButtonStyle}">
                                        <resources:NavigationItem Padding="0,8"
                                                                  CommandName="{Binding NavigateToCustomersCommand}"
                                                                  GroupName="MenuItem"
                                                                  Icon="{DynamicResource Customers}"
                                                                  IconWidth="18"
                                                                  IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                  Text="Customers" />
                                    </Button>

                                    <!--  Locations  -->
                                    <Button x:Name="BtnLocations"
                                            Margin="0,2,0,2"
                                            MouseEnter="BtnLocations_MouseEnter"
                                            MouseLeave="BtnLocations_MouseLeave"
                                            Style="{DynamicResource PopupButtonStyle}">
                                        <resources:NavigationItem Padding="0,8"
                                                                  CommandName="{Binding NavigateToLocationsCommand}"
                                                                  GroupName="MenuItem"
                                                                  Icon="{DynamicResource Locations}"
                                                                  IconWidth="18"
                                                                  IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                  Text="Locations" />
                                    </Button>

                                    <!--  Reports  -->
                                    <Button x:Name="BtnReports"
                                            Margin="0,2,0,2"
                                            MouseEnter="BtnReports_MouseEnter"
                                            MouseLeave="BtnReports_MouseLeave"
                                            Style="{DynamicResource PopupButtonStyle}">
                                        <resources:NavigationItem Padding="0,8"
                                                                  CommandName="{Binding NavigateToReportsCommand}"
                                                                  GroupName="MenuItem"
                                                                  Icon="{DynamicResource Reports}"
                                                                  IconWidth="18"
                                                                  IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                  Text="Reports" />
                                    </Button>

                                    <Separator Margin="20,15,20,15" Background="{DynamicResource TertiaryBackgroundColor}" />

                                    <!--  Settings  -->
                                    <Button x:Name="BtnSettings"
                                            Margin="0,2,0,2"
                                            MouseEnter="BtnSettings_MouseEnter"
                                            MouseLeave="BtnSettings_MouseLeave"
                                            Style="{DynamicResource PopupButtonStyle}">
                                        <resources:NavigationItem Padding="0,8"
                                                                  CommandName="{Binding NavigateToSettingsCommand}"
                                                                  GroupName="MenuItem"
                                                                  Icon="{DynamicResource Settings}"
                                                                  IconWidth="18"
                                                                  IndicatorBrush="{DynamicResource PrimaryBlueColor}"
                                                                  Text="Settings" />
                                    </Button>
                                </StackPanel>
                            </ScrollViewer>
                            <!--  End Navigation Buttons  -->

                            <!--  Start Theme Switcher  -->
                            <Border Grid.Row="2"
                                    Width="110"
                                    Height="35"
                                    Margin="0,0,20,0"
                                    HorizontalAlignment="Right"
                                    Background="{DynamicResource TertiaryBackgroundColor}"
                                    CornerRadius="18">
                                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                    <Path Width="16"
                                          Height="16"
                                          VerticalAlignment="Center"
                                          Data="{DynamicResource Sun}"
                                          Fill="{DynamicResource PrimaryYellowColor}"
                                          Stretch="UniformToFill" />
                                    <ToggleButton x:Name="Themes"
                                                  Margin="10,0,10,0"
                                                  HorizontalAlignment="Right"
                                                  Click="Themes_Click"
                                                  IsChecked="False"
                                                  Style="{DynamicResource ToggleButtonStyle}" />
                                    <Path Width="16"
                                          Height="16"
                                          VerticalAlignment="Center"
                                          Data="{DynamicResource Moon}"
                                          Fill="{DynamicResource PrimaryWhiteColor}"
                                          Stretch="Fill" />
                                </StackPanel>
                            </Border>
                            <!--  End Theme Switcher  -->

                            <!--  Popup user control  -->
                            <Popup x:Name="Popup"
                                   AllowsTransparency="True"
                                   HorizontalOffset="0"
                                   VerticalOffset="10">
                                <resources:UserPopUp x:Name="PopupHeader" Foreground="{DynamicResource ForegroundBrush}" />
                            </Popup>
                        </Grid>
                    </Border>
                    <!--  End Navigation-Pane  -->

                    <!--  Start Main-Content  -->
                    <Grid Grid.Column="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="70" />
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0"
                              Background="Transparent"
                              MouseDown="TopBar_OnMouseDown">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="auto" />
                            </Grid.ColumnDefinitions>

                            <!--  Toggle button for expanding/collapsing the navigation panel  -->
                            <ToggleButton x:Name="TgBtn"
                                          Grid.Column="0"
                                          Margin="10,0,0,0"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Center"
                                          IsChecked="True"
                                          Style="{DynamicResource AnimatedHamburgerToggleStyle}">
                                <ToggleButton.Triggers>
                                    <!--  Animation for collapsing the navigation panel  -->
                                    <EventTrigger RoutedEvent="ToggleButton.Unchecked">
                                        <BeginStoryboard>
                                            <Storyboard x:Name="HideStackPanel">
                                                <DoubleAnimation BeginTime="0:0:0"
                                                                 Storyboard.TargetName="GridNav"
                                                                 Storyboard.TargetProperty="Width"
                                                                 From="250"
                                                                 To="60"
                                                                 Duration="0:0:0.3" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <!--  Animation for expanding the navigation panel  -->
                                    <EventTrigger RoutedEvent="ToggleButton.Checked">
                                        <BeginStoryboard>
                                            <Storyboard x:Name="ShowStackPanel">
                                                <DoubleAnimation BeginTime="0:0:0"
                                                                 Storyboard.TargetName="GridNav"
                                                                 Storyboard.TargetProperty="Width"
                                                                 From="60"
                                                                 To="250"
                                                                 Duration="0:0:0.3" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </ToggleButton.Triggers>
                            </ToggleButton>

                            <!--  Breadcrumb  -->
                            <TextBlock Grid.Column="1"
                                       Margin="15,0,0,0"
                                       VerticalAlignment="Center"
                                       FontSize="13"
                                       Foreground="#94a3b8"
                                       Text="Home / Dashboard" />

                            <!--  Window Buttons  -->
                            <StackPanel Grid.Column="2"
                                        Height="30"
                                        Margin="0,5,10,0"
                                        VerticalAlignment="Top"
                                        FlowDirection="RightToLeft"
                                        Orientation="Horizontal">
                                <Button x:Name="CloseButton"
                                        Click="CloseButton_OnClick"
                                        Content="{DynamicResource Close}"
                                        Style="{StaticResource IconButtonsStyle}"
                                        Tag="IsCloseButton" />
                                <Button x:Name="RestoreButton"
                                        Margin="5,0"
                                        Click="RestoreButton_OnClick"
                                        Content="{DynamicResource Maximize}"
                                        Style="{StaticResource IconButtonsStyle}" />
                                <Button x:Name="MinimizeButton"
                                        Click="MinimizeButton_OnClick"
                                        Content="{DynamicResource Minimize}"
                                        Style="{StaticResource IconButtonsStyle}" />
                            </StackPanel>

                        </Grid>

                        <ContentControl Grid.Row="1"
                                        Margin="10"
                                        Content="{Binding CurrentMainContent}" />
                    </Grid>
                    <!--  End Main-Content  -->
                </Grid>
            </Border>
        </Grid>
    </Border>
</views:MvxWpfView>