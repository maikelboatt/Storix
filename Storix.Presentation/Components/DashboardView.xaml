<views:MvxWpfView x:Class="Storix.Presentation.Components.DashboardView"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:loadingSpinnerControl="clr-namespace:LoadingSpinnerControl;assembly=LoadingSpinnerControl"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  xmlns:resources="clr-namespace:Storix.Presentation.Resources"
                  xmlns:viewModels="clr-namespace:Storix.Core.ViewModels;assembly=Storix.Core"
                  xmlns:views="clr-namespace:MvvmCross.Platforms.Wpf.Views;assembly=MvvmCross.Platforms.Wpf"
                  d:DataContext="{d:DesignInstance Type=viewModels:DashboardViewModel,
                                                   IsDesignTimeCreatable=True}"
                  d:DesignHeight="auto"
                  d:DesignWidth="auto"
                  mc:Ignorable="d">
    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
        <Grid>
            <Grid.Resources>
                <BooleanToVisibilityConverter x:Key="ToVisibilityConverter" />
            </Grid.Resources>
            <StackPanel VerticalAlignment="Center" Visibility="{Binding IsLoading, Converter={StaticResource ToVisibilityConverter}, UpdateSourceTrigger=PropertyChanged}">
                <loadingSpinnerControl:LoadingSpinner Diameter="100"
                                                      IsLoading="{Binding IsLoading}"
                                                      Thickness="3" />

                <TextBlock Margin="0,10"
                           FontFamily="Amita"
                           Text="Loading analytics data..."
                           TextAlignment="Center" />
            </StackPanel>

            <Grid Margin="20" Visibility="{Binding IsLoading, Converter={StaticResource InverseBooleanToVisibilityConverter}, UpdateSourceTrigger=PropertyChanged}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Header Section  -->
                <StackPanel Grid.Row="0" Margin="0,0,0,25">
                    <TextBlock Margin="0,0,0,8"
                               FontSize="32"
                               FontWeight="Bold"
                               Foreground="#1e293b"
                               Text="Analytics Dashboard" />
                    <TextBlock FontSize="16"
                               Foreground="#64748b"
                               Text="Comprehensive insights into your inventory performance" />
                </StackPanel>

                <!--  Key Metrics Cards  -->
                <WrapPanel Grid.Row="1">
                    <resources:CustomCards Background="White"
                                           BorderBrush="#E2E8F0"
                                           CardImage="/Assets/Icons/revenue.png"
                                           CardTitle="Total Revenue"
                                           CardValue="$48.5K"
                                           ChangePercentage="↑ 15%"
                                           IconBackground="#D1FAE5" />

                    <resources:CustomCards Background="White"
                                           BorderBrush="#E2E8F0"
                                           CardImage="/Assets/Icons/products.png"
                                           CardTitle="Total Products"
                                           CardValue="1,284"
                                           ChangePercentage="↑ 12%"
                                           IconBackground="#DBEAFE" />

                    <resources:CustomCards Background="White"
                                           BorderBrush="#E2E8F0"
                                           CardImage="/Assets/Icons/orders.png"
                                           CardTitle="Active Orders"
                                           CardValue="87"
                                           ChangePercentage="↑ 8%"
                                           IconBackground="#FEF3C7" />

                    <resources:CustomCards Background="White"
                                           BorderBrush="#E2E8F0"
                                           CardImage="/Assets/Icons/alert.png"
                                           CardTitle="Low Stock Items"
                                           CardValue="23"
                                           ChangePercentage="Action needed"
                                           IconBackground="#FEE2E2" />

                    <resources:CustomCards Background="White"
                                           BorderBrush="#E2E8F0"
                                           CardImage="/Assets/Icons/profit.png"
                                           CardTitle="Profit Margin"
                                           CardValue="32.4%"
                                           ChangePercentage="↑ 3.2%"
                                           IconBackground="#E9D5FF" />

                    <resources:CustomCards Background="White"
                                           BorderBrush="#E2E8F0"
                                           CardImage="/Assets/Icons/turnover.png"
                                           CardTitle="Inventory Turnover"
                                           CardValue="4.2x"
                                           ChangePercentage="↑ 0.5x"
                                           IconBackground="#CFFAFE" />
                </WrapPanel>

                <!--  Charts Section  -->
                <Grid Grid.Row="2" Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" />
                        <ColumnDefinition Width="15" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>

                    <!--  Revenue Trend Chart  -->
                    <Border Grid.Column="0"
                            Padding="20"
                            Background="White"
                            BorderBrush="#E2E8F0"
                            BorderThickness="1"
                            CornerRadius="12">
                        <StackPanel>
                            <Grid Margin="0,0,0,20">
                                <TextBlock HorizontalAlignment="Left"
                                           FontSize="20"
                                           FontWeight="SemiBold"
                                           Foreground="#1e293b"
                                           Text="Revenue Trend" />
                                <ComboBox Width="120"
                                          HorizontalAlignment="Right"
                                          SelectedIndex="0">
                                    <ComboBoxItem Content="Last 7 days" />
                                    <ComboBoxItem Content="Last 30 days" />
                                    <ComboBoxItem Content="Last 3 months" />
                                    <ComboBoxItem Content="Last year" />
                                </ComboBox>
                            </Grid>

                            <!--  Placeholder for Chart Control  -->
                            <Border Height="280"
                                    Background="#F8FAFC"
                                    BorderBrush="#E2E8F0"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="16"
                                           Foreground="#64748b"
                                           Text="📊 Line Chart: Revenue Over Time" />
                            </Border>
                        </StackPanel>
                    </Border>

                    <!--  Top Products  -->
                    <!--  2. Use ItemsControl to bind to collection  -->
                    <Border Grid.Column="2"
                            Padding="20"
                            Background="White"
                            BorderBrush="#E2E8F0"
                            BorderThickness="1"
                            CornerRadius="12">
                        <StackPanel>
                            <TextBlock Margin="0,0,0,15"
                                       FontSize="20"
                                       FontWeight="SemiBold"
                                       Foreground="#1e293b"
                                       Text="Top Products" />

                            <!--  ItemsControl bound to TopProducts collection  -->
                            <ItemsControl ItemsSource="{Binding TopProducts}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <resources:TopProductItem ProductName="{Binding ProductName}"
                                                                  Rank="{Binding Rank}"
                                                                  Revenue="{Binding TotalRevenue}"
                                                                  UnitsSold="{Binding UnitsSold}" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </Grid>

                <!--  Additional Analytics Section  -->
                <Grid Grid.Row="3" Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="15" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="15" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>

                    <!--  Sales by Category  -->
                    <Border Grid.Column="0"
                            Padding="20"
                            Background="White"
                            BorderBrush="#E2E8F0"
                            BorderThickness="1"
                            CornerRadius="12">
                        <StackPanel>
                            <TextBlock Margin="0,0,0,20"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="#1e293b"
                                       Text="Sales by Category" />

                            <Border Height="220"
                                    Background="#F8FAFC"
                                    BorderBrush="#E2E8F0"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="16"
                                           Foreground="#64748b"
                                           Text="🥧 Pie Chart" />
                            </Border>
                        </StackPanel>
                    </Border>

                    <!--  Stock Levels  -->
                    <Border Grid.Column="2"
                            Padding="20"
                            Background="White"
                            BorderBrush="#E2E8F0"
                            BorderThickness="1"
                            CornerRadius="12">
                        <StackPanel>
                            <TextBlock Margin="0,0,0,20"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="#1e293b"
                                       Text="Stock Levels" />

                            <Border Height="220"
                                    Background="#F8FAFC"
                                    BorderBrush="#E2E8F0"
                                    BorderThickness="1"
                                    CornerRadius="8">
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="16"
                                           Foreground="#64748b"
                                           Text="📊 Bar Chart" />
                            </Border>
                        </StackPanel>
                    </Border>

                    <!--  Order Status  -->
                    <Border Grid.Column="4"
                            Padding="20"
                            Background="White"
                            BorderBrush="#E2E8F0"
                            BorderThickness="1"
                            CornerRadius="12">
                        <StackPanel>
                            <TextBlock Margin="0,0,0,20"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="#1e293b"
                                       Text="Order Status" />

                            <StackPanel>
                                <Border Margin="0,0,0,10"
                                        Padding="15"
                                        Background="#DBEAFE"
                                        CornerRadius="8">
                                    <Grid>
                                        <TextBlock FontWeight="SemiBold"
                                                   Foreground="#1e293b"
                                                   Text="Draft" />
                                        <TextBlock HorizontalAlignment="Right"
                                                   FontSize="20"
                                                   FontWeight="Bold"
                                                   Foreground="#3B82F6"
                                                   Text="34" />
                                    </Grid>
                                </Border>

                                <Border Margin="0,0,0,10"
                                        Padding="15"
                                        Background="#FEF3C7"
                                        CornerRadius="8">
                                    <Grid>
                                        <TextBlock FontWeight="SemiBold"
                                                   Foreground="#1e293b"
                                                   Text="Active" />
                                        <TextBlock HorizontalAlignment="Right"
                                                   FontSize="20"
                                                   FontWeight="Bold"
                                                   Foreground="#F59E0B"
                                                   Text="28" />
                                    </Grid>
                                </Border>

                                <Border Margin="0,0,0,10"
                                        Padding="15"
                                        Background="#D1FAE5"
                                        CornerRadius="8">
                                    <Grid>
                                        <TextBlock FontWeight="SemiBold"
                                                   Foreground="#1e293b"
                                                   Text="Completed" />
                                        <TextBlock HorizontalAlignment="Right"
                                                   FontSize="20"
                                                   FontWeight="Bold"
                                                   Foreground="#10B981"
                                                   Text="142" />
                                    </Grid>
                                </Border>

                                <Border Padding="15"
                                        Background="#FEE2E2"
                                        CornerRadius="8">
                                    <Grid>
                                        <TextBlock FontWeight="SemiBold"
                                                   Foreground="#1e293b"
                                                   Text="Cancelled" />
                                        <TextBlock HorizontalAlignment="Right"
                                                   FontSize="20"
                                                   FontWeight="Bold"
                                                   Foreground="#EF4444"
                                                   Text="5" />
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>

                <!--  Performance Indicators  -->
                <Border Grid.Row="4"
                        Padding="20"
                        Background="White"
                        BorderBrush="#E2E8F0"
                        BorderThickness="1"
                        CornerRadius="12">
                    <StackPanel>
                        <TextBlock Margin="0,0,0,20"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Foreground="#1e293b"
                                   Text="Key Performance Indicators" />

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  Average Order Value  -->
                            <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                <TextBlock Margin="0,0,0,8"
                                           FontSize="14"
                                           Foreground="#64748b"
                                           Text="Avg. Order Value" />
                                <TextBlock Margin="0,0,0,5"
                                           FontSize="28"
                                           FontWeight="Bold"
                                           Foreground="#1e293b"
                                           Text="$558" />
                                <Border Padding="8,4"
                                        HorizontalAlignment="Left"
                                        Background="#D1FAE5"
                                        CornerRadius="12">
                                    <TextBlock FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#065F46"
                                               Text="↑ 7.2%" />
                                </Border>
                            </StackPanel>

                            <!--  Conversion Rate  -->
                            <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                <TextBlock Margin="0,0,0,8"
                                           FontSize="14"
                                           Foreground="#64748b"
                                           Text="Conversion Rate" />
                                <TextBlock Margin="0,0,0,5"
                                           FontSize="28"
                                           FontWeight="Bold"
                                           Foreground="#1e293b"
                                           Text="68.3%" />
                                <Border Padding="8,4"
                                        HorizontalAlignment="Left"
                                        Background="#D1FAE5"
                                        CornerRadius="12">
                                    <TextBlock FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#065F46"
                                               Text="↑ 2.1%" />
                                </Border>
                            </StackPanel>

                            <!--  Customer Retention  -->
                            <StackPanel Grid.Column="2" Margin="0,0,15,0">
                                <TextBlock Margin="0,0,0,8"
                                           FontSize="14"
                                           Foreground="#64748b"
                                           Text="Customer Retention" />
                                <TextBlock Margin="0,0,0,5"
                                           FontSize="28"
                                           FontWeight="Bold"
                                           Foreground="#1e293b"
                                           Text="84.7%" />
                                <Border Padding="8,4"
                                        HorizontalAlignment="Left"
                                        Background="#D1FAE5"
                                        CornerRadius="12">
                                    <TextBlock FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#065F46"
                                               Text="↑ 5.3%" />
                                </Border>
                            </StackPanel>

                            <!--  Days to Fulfill  -->
                            <StackPanel Grid.Column="3">
                                <TextBlock Margin="0,0,0,8"
                                           FontSize="14"
                                           Foreground="#64748b"
                                           Text="Avg. Days to Fulfill" />
                                <TextBlock Margin="0,0,0,5"
                                           FontSize="28"
                                           FontWeight="Bold"
                                           Foreground="#1e293b"
                                           Text="2.4 days" />
                                <Border Padding="8,4"
                                        HorizontalAlignment="Left"
                                        Background="#D1FAE5"
                                        CornerRadius="12">
                                    <TextBlock FontSize="11"
                                               FontWeight="SemiBold"
                                               Foreground="#065F46"
                                               Text="↓ 0.3 days" />
                                </Border>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

            </Grid>

        </Grid>
    </ScrollViewer>
</views:MvxWpfView>